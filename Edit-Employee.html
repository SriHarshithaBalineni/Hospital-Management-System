<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
</head>
<body>
    <div class="container">
        <h2>Welcome, Admin</h2>
        <div class="card">
            <h3>Add New Employee</h3>
            <form action="/add-doctor" method="post">
                <label for="name">Name:</label><br> 
                <input type="text" id="name" name="name" required><br>
                <label for="department">Department:</label><br>
                <input type="text" id="department" name="department" required><br>
                <label for="start_time">Start Time:</label><br>
                <input type="text" id="start_time" name="start_time" required><br>
                <label for="end_time">End Time:</label><br>
                <input type="text" id="end_time" name="end_time" required><br><br>
                <button type="submit">Add Employee</button>
            </form>
        </div>
       
        <form id="delete_form">
          <label for="delete_doctor">Select Doctor:</label><br>
          <select id="delete_doctor" name="name">
            </select><br><br>
          <button type="button" onclick="deleteDoctor()">Delete Doctor</button>
        </form>
        
        
    </form>
    
  
    </div>

    <script>
        // JavaScript function to handle deletion of a doctor
    function deleteDoctor() {
      const deleteDoctorSelect = document.getElementById('delete_doctor');
      const selectedDoctorName = deleteDoctorSelect.value; // Access selected value directly

      console.log('Selected Doctor Name:', selectedDoctorName);

      if (!selectedDoctorName) {
        alert('Please select a doctor to delete');
        return; // Prevent further code execution
      }

      fetch('/delete-doctor', {
        method: 'DELETE',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ name: selectedDoctorName })
      })
        .then(response => response.json())
        .then(data => {
          console.log('Deletion Response:', data); // Log the response data
          alert('Doctor deleted successfully!');
        })
        .catch(error => {
          console.error('Error deleting doctor:', error);
          alert('An error occurred while deleting the doctor.');
        });
    }

    // Fetch doctor names from the server and populate dropdowns
    window.onload = function() {
      fetch('/get-doctors')
        .then(response => response.json())
        .then(data => {
          const deleteDoctorSelect = document.getElementById('delete_doctor');

          // Clear any existing options
          deleteDoctorSelect.innerHTML = '';

          // Populate options for delete doctor dropdown
          data.forEach(doctor => {
            const option = document.createElement('option');
            option.textContent = doctor.name;
            option.value = doctor.id; // Use doctor ID as value (optional)
            deleteDoctorSelect.appendChild(option);
          });
        })
        .catch(error => console.error('Error fetching doctors:', error));
    };
    </script>
</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
</head>
<body>
  <div class="container">
    <h2>Welcome, Admin</h2>
    <div class="card">
      <h3>Add New Employee</h3>
      <form action="/add-doctor" method="post">
        <label for="name">Name:</label><br> 
        <input type="text" id="name" name="name" required><br>
        <label for="department">Department:</label><br>
        <input type="text" id="department" name="department" required><br>
        <label for="start_time">Start Time:</label><br>
        <input type="text" id="start_time" name="start_time" required><br>
        <label for="end_time">End Time:</label><br>
        <input type="text" id="end_time" name="end_time" required><br><br>
        <button type="submit">Add Employee</button>
    </form>
      </div>

    <form id="delete_form">
      <label for="delete_doctor">Select Doctor:</label><br>
      <select id="delete_doctor" name="name">
      </select><br><br>
      <button type="button" onclick="deleteDoctor()">Delete Doctor</button>
    </form>

  </div>

  <script>
    // JavaScript function to handle deletion of a doctor
    function deleteDoctor() {
      const deleteDoctorSelect = document.getElementById('delete_doctor');
      const selectedDoctorName = deleteDoctorSelect.value; // Assuming value holds the name

      console.log('Selected Doctor Name:', selectedDoctorName); // Log for debugging

      if (!selectedDoctorName) {
        alert('Please select a doctor to delete');
        return; // Prevent further code execution
      }

      fetch('/delete-doctor', {
        method: 'DELETE',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ doctorName: selectedDoctorName }) // Send doctor name
      })
        .then(response => response.json())
        .then(data => {
          console.log('Deletion Response:', data); // Log the response data
          alert('Doctor deleted successfully!');
        })
        .catch(error => {
          console.error('Error deleting doctor:', error);
          alert('An error occurred while deleting the doctor.');
        });
    }

    // Fetch doctor names from the server and populate dropdowns
    window.onload = function() {
      fetch('/get-doctors')
        .then(response => response.json())
        .then(data => {
          const deleteDoctorSelect = document.getElementById('delete_doctor');

          // Clear any existing options
          deleteDoctorSelect.innerHTML = '';

          // Populate options for delete doctor dropdown
          data.forEach(doctor => {
            const option = document.createElement('option');
            option.textContent = doctor.name; // Display doctor name
            option.value = doctor.name; // Set name as the value (optional - not used here)
            deleteDoctorSelect.appendChild(option);
          });
        })
        .catch(error => console.error('Error fetching doctors:', error));
    };
  </script>
</body>
</html>
